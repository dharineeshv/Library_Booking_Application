<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <script src="https://kit.fontawesome.com/6045d1d2eb.js" crossorigin="anonymous"></script>
</head>
<body>
     <div class="nav-container">
          <i class="fa-solid fa-arrow-left"></i>
          <h2>Add New Slot</h2>
     </div>
     <div class="container">
        <label for="venue">Venue Name</label>
        <input type="text" id="venue" name="venue" placeholder="eg: Main Library, BIT Auditorium" required>
        <label for="Date">Date</label>
        <input type="date" id="date" name="date">
        <div class="inner-container">

            <div id="inner-container-1">
               <label for="start-time">Start Time</label>
               <input type="time" id="start-time" name="start-time">
            </div>

            <div id="inner-container-2">  
                <label for="end-time">End Time</label>
                <input type="time" id="end-time" name="end-time">
            </div>
            
        </div>
    <label for="Slots">Total Slots</label>
    <input type="number" id="slots" name="slots" placeholder="eg: 100" required>
    <div id="btn">
<button>Add Slot</button>
    </div>
    
     </div>
     
<div id="popup" class="popup">
    <i class="fa-solid fa-circle-check"></i>
    <p>Slot Added Successfully!</p>
</div>

</body>
</html>
<style>
     @import url("https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap");

@import url('https://fonts.googleapis.com/css2?family=Alan+Sans:wght@300..900&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap');
    
    * {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
    }
    #inner-container-1, #inner-container-2{
        display:flex;
        flex-direction: column;
        width:100%;

    }
    .inner-container{
        display:flex;
        gap:20px;
        flex-direction: row;
    }
    #btn {
       display:flex;
       justify-content: center;
       align-items: center;
    }
   button {
    padding:8px;
    border-radius: 5px;
    border:none;
    background-color: #007bff;
    color: white;
    font-size: 1em;
    cursor: pointer;
    margin-top:160px;
    width:60%;
    

}
    body {
        font-family: Arial, sans-serif;
        padding: 0px;
        background: #f7f9fc;
        font-family: 'Poppins', sans-serif;
        
    }
    input{
        margin-top: 10px;
        margin-bottom: 20px;
        padding: 8px;
        width: 100%;
        background-color: rgb(255, 255, 255);
        border: 1px solid #ccc;
        border-radius: 6px;
    }
    .nav-container {
        display: flex;
        align-items: center;
        gap: 40%;
        padding: 15px;
        background: #fff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    h2 {
        font-weight: 600;
        color: #222;
    }
    .container {
        display:flex;
        flex-direction: column;
        padding:15px;
    }
    /* POPUP */
.popup {
  position: fixed;
  bottom: -100px;
  left: 50%;
  transform: translateX(-50%);
  background: #0066ffb3;
  color: #fff;
  padding: 15px 25px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 1.05em;
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  opacity: 0;
  transition: all 0.5s ease;
  z-index: 9999;
}

.popup.show {
  bottom: 30px;
  opacity: 1;
}

.popup.hide {
  opacity: 0;
  bottom: -100px;
}
.popup i {
  font-size: 1.4em;
  color: #ffffff;
}

</style>
<script>
    document.querySelector('.fa-arrow-left').addEventListener('click', function() {
        window.location.href = 'admin_dashboard.html'; 
    });

    let date = document.querySelector('#date');
    let today = new Date().toISOString().split('T')[0];
    date.setAttribute('min', today);
    date.value = today;
    console.log(today);

    let start_time = document.querySelector('#start-time');
    let end_time = document.querySelector('#end-time');
    let time = new Date();
    let hr = time.getHours();
    let min = time.getMinutes();
    if(hr<10){
        hr = '0' + hr;
    }   
    else{
        hr = hr;
    }
    if(min<10){
        min = '0' + min;
    }   
    else{
        min = min;
    }
    start_time.value = hr + ':' + min;
   if(hr===24)
   {
    end_time.value = '23:59';
   }
   else{
    end_time.value = (parseInt(hr)+1) + ':' + min;
   }
   
  

   
    
</script>


<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import {
    getDatabase,
    ref,
    set,
    onValue,
    get,
    push,
    update
  } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-database.js";

  const appSetting = {
    databaseURL: "https://library-slot-booking-8ef25-default-rtdb.firebaseio.com/",
  };
  const app = initializeApp(appSetting);
  const database = getDatabase(app);


  const student_otp_db = ref(database, "Slots");
  let venueInput = document.getElementById('venue');
  let slotsInput = document.getElementById('slots');

let btn = document.querySelector('button');
 btn.addEventListener('click',() => {
       
   
  if(venueInput.value.trim()==="" || slotsInput.value.trim()===''){
    alert('Please fill all the fields');
    return;
  }
  else{
   let datas = {
        venue:venueInput.value.trim(),
        date:date.value,
        start_time:start_time.value,
        end_time:end_time.value,
        total_slots:slotsInput.value,
        booked_slots:0
        
    }

push(student_otp_db, datas).then(() => {
  showPopup(); //ðŸŽ‰ replaces alert
});

    
  }
  });
    function showPopup() {
  const popup = document.getElementById("popup");
  popup.classList.add("show");

  setTimeout(() => {
    popup.classList.remove("show");
    popup.classList.add("hide");
  }, 2000);

  setTimeout(() => {
    window.location.href = "admin_dashboard.html";
  }, 2400);
}

</script>

